<!DOCTYPE html>

<head>
    <title>MillsPedia Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <style> 
        #map { 
            width: 100%; 
            height: 100vh; }
        .image{
            width: 200px;
        }
    </style>
</head>



<body>
    <div id="map"></div>
</body>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<script>
    //Setup of map
    var map = L.map('map').setView([37.780508, -122.183204
], 16);
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    minZoom: 15,
    maxZoom: 18,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
}).addTo(map);


    //Put picture over mills area
    var errorOverlayUrl = 'https://cdn-icons-png.flaticon.com/512/110/110686.png';
    var altText = 'Image of Newark, N.J. in 1922. Source: The University of Texas at Austin, UT Libraries Map Collection.';
    var latLngBounds = L.latLngBounds([[40.799311, -74.118464], [40.68202047785919, -74.33]]);

    var imageOverlay = L.imageOverlay('secrets/campus.png', latLngBounds, {
    opacity: 0.8,
    errorOverlayUrl: errorOverlayUrl,
    alt: altText,
    interactive: true
}).addTo(map);

    //Parse a csv file
    // Papa.parse(document.getElementById('https://file.io/q7LH5JKhuRVi').files[0],{
    //     download: true,
    //     header: true,
    //     complete: function(results) {
    //         console.log(results.data);
    //     }
    // })

    //Marker setup
    var marker = L.marker([37.780508, -122.183204]).addTo(map);
    var marker1 = L.marker([37.779114, -122.18232]).addTo(map);
    marker.bindPopup("<b>Welcome to mills!</b><br>Test popup.").openPopup();
    marker1.bindPopup("<img class ='image' src='secrets/doggers.jpg'><br><b>This is the oval!</b><br><a href='https://quarterly.mills.edu/the-gregarious-ghosts-of-mills/'>Cute dogs were buried here</a>").openPopup();

    //Popup setup
    var popup = L.popup();
    function onMapClick(e) {
    popup
        .setLatLng(e.latlng)
        .setContent(e.latlng.toString())
        .openOn(map);
    }
    map.on('click', onMapClick);

</script>